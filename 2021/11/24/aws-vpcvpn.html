<!doctype html><html lang=zh-cn dir=content/zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=content-security-policy content="upgrade-insecure-requests"><title>AWS-VPC VPN - 路无止境！</title><meta name=keywords content="博客,架构师,思考,读书,笔记,技术,分享,云"><meta name=author content="Etaon"><meta property="og:title" content="AWS-VPC VPN"><meta property="og:site_name" content="路无止境！"><meta property="og:image" content="/img/author.jpg"><meta name=title content="AWS-VPC VPN - 路无止境！"><meta name=description content="欢迎来到ETAON空间站，个人主要专注于Infra系统架构，私有/公有云产品，售前及微服务解决方案。"><link rel="shortcut icon" href=/img/favicon.ico><link rel=apple-touch-icon href=/img/apple-touch-icon.png><link rel=apple-touch-icon-precomposed href=/img/apple-touch-icon.png><link href=//cdn.bootcdn.net/ajax/libs/font-awesome/4.6.2/css/font-awesome.min.css rel=stylesheet type=text/css><link href=//cdn.bootcdn.net/ajax/libs/imageviewer/0.1.0/viewer.min.css rel=stylesheet><link href=/css/main.css rel=stylesheet type=text/css><link href=/css/syntax.css rel=stylesheet type=text/css></head><body itemscope itemtype=http://schema.org/WebPage lang=zh-hans><div class="container one-collumn sidebar-position-left page-home"><div class=headband></div><header id=header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle role=button style=opacity:1;top:0><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><div class=multi-lang-switch><i class="fa fa-fw fa-language" style=margin-right:5px></i>
<a class=lang-link id=zh-cn href=#>学习</a></div><div class=custom-logo-site-title><a href=/ class=brand rel=start><span class=logo-line-before><i></i></span>
<span class=site-title>路无止境！</span>
<span class=logo-line-after><i></i></span></a></div><p class=site-subtitle>没有伞的孩子要学会努力奔跑!</p></div><div class=site-nav-right><div class="toggle popup-trigger" style=opacity:1;top:0><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul id=menu class=menu><li class=menu-item><a href=/ rel=section><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class=menu-item><a href=/post rel=section><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class=menu-item><a href=/about.html rel=section><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于我</a></li><li class=menu-item><a href=/404.html rel=section><i class="menu-item-icon fa fa-fw fa-heartbeat"></i><br>公益404</a></li><li class="menu-item menu-item-search"><a href=javascript:; class=popup-trigger><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class=site-search><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class=search-icon><i class="fa fa-search"></i></span>
<span class=popup-btn-close><i class="fa fa-times-circle"></i></span><div class=local-search-input-wrapper><input autocomplete=off placeholder=搜索关键字... spellcheck=false type=text id=local-search-input autocapitalize=none autocorrect=off></div></div><div id=local-search-result></div></div></div></nav></div></header><main id=main class=main><div class=main-inner><div class=content-wrap><div id=content class=content><section id=posts class=posts-expand><article class="post post-type-normal" itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline" style=font-weight:700><a class=post-title-link href=https://www.etaon.top/2021/11/24/aws-vpcvpn.html itemprop=url>AWS-VPC VPN</a></h1></header><div class=post-body itemprop=articleBody><h1 id=配置客户端-vpn>配置客户端 VPN</h1><h2 id=aws-客户端-vpn概述>AWS 客户端 VPN概述</h2><p>AWS 客户端 VPN是一种基于客户端的托管 VPN 服务，让用户能够安全地访问 AWS 资源和本地网络中的资源。</p><h2 id=示例拓扑>示例拓扑</h2><p><img src="https://img-blog.csdnimg.cn/fdb2aadeaab6494bbcfc6cd92e2f8701.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM5NDcyNA==,size_16,color_FFFFFF,t_70" alt="https://img-blog.csdnimg.cn/fdb2aadeaab6494bbcfc6cd92e2f8701.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM5NDcyNA==,size_16,color_FFFFFF,t_70"></p><h2 id=客户端-vpn-的组件>客户端 VPN 的组件</h2><p>以下是客户端 VPN 的主要概念：</p><ul><li>客户端 VPN 终端节点
客户端 VPN 终端节点是创建并配置以用于启用和管理客户端 VPN 会话的资源。它是所有客户端 VPN 会话终止时所在的资源。</li><li>目标网络
目标网络是与客户端 VPN 终端节点关联的网络。VPC 中的子网是目标网络。通过将子网与客户端 VPN 终端节点关联，可以建立 VPN 会话。也可以将多个子网与一个客户端 VPN 终端节点关联以实现高可用性。所有子网都必须来自同一 VPC。每个子网都必须属于不同的可用区。</li><li>路由
每个客户端 VPN 终端节点都具有一个路由表，用于描述可用的目标网络路由。路由表中的每个路由都指定了到特定资源或网络的途径。</li><li>授权规则
授权规则限制可访问网络的用户。对于指定的网络，可以配置允许访问的 Active Directory 或身份提供商 (IdP) 组。只有属于此组的用户才能访问指定的网络。默认情况下，没有授权规则，必须配置授权规则来允许用户访问资源和网络。</li><li>客户端
连接到客户端 VPN 终端节点以建立 VPN 会话的最终用户。最终用户需要下载 OpenVPN 客户端，并使用以上创建的客户端 VPN 配置文件来建立 VPN 会话。</li><li>客户端 CIDR 范围
从中分配客户端 IP 地址的 IP 地址范围。将从客户端 CIDR 范围中为每个到客户端 VPN 终端节点的连接分配一个唯一的 IP 地址。可以选择客户端 CIDR 范围，例如 10.2.0.0/16。</li><li>客户端 VPN 端口
AWS 客户端 VPN 支持 TCP 和 UDP 的端口 443 和 1194。默认值为端口 443。</li><li>客户端 VPN 网络接口
将子网与客户端 VPN 终端节点关联时，我们在该子网中创建客户端 VPN 网络接口。从客户端 VPN 终端节点发送到 VPC 的流量将通过客户端 VPN 网络接口发送。然后应用源网络地址转换 (SNAT)，将客户端 CIDR 范围内的源 IP 地址转换为客户端 VPN 网络接口 IP 地址。</li><li>连接日志记录
可以为客户端 VPN 终端节点启用连接日志记录以记录连接事件。可以使用此信息运行取证、分析客户端 VPN 终端节点的使用方式或调试连接问题。</li><li>自助服务门户
可以为客户端 VPN 终端节点启用自助服务门户。客户端可以使用其凭证登录基于 Web 的门户，然后下载客户端 VPN 终端节点配置文件的最新版本或 AWS 提供的客户端的最新版本。</li></ul><h2 id=实验步骤>实验步骤</h2><p>本实验参考：<a href=https://docs.aws.amazon.com/zh_cn/vpn/latest/clientvpn-admin/cvpn-getting-started.html>客户端 VPN 入门</a></p><h3 id=配置双向身份验证>配置双向身份验证</h3><p>借助双向身份验证，客户端 VPN 使用证书在客户端和服务器之间执行身份验证。
证书是由证书颁发机构 (CA) 颁发的数字化身份。当客户端尝试连接到客户端 VPN 终端节点时，服务器使用客户端证书对客户端进行身份验证。如果没有由证书颁发机构 (CA) 颁发的证书，必须创建服务器证书和密钥，以及至少一个客户端证书和密钥。</p><p>然后，必须将服务器证书上传到 AWS Certificate Manager (ACM)，并在创建客户端 VPN 终端节点时指定该证书。</p><ol><li>将 OpenVPN easy-rsa 存储库克隆到本地计算机并导航到 easy-rsa/easyrsa3 文件夹。</li></ol><blockquote><p>[root@aws-client ~]# <strong>git clone <a href=https://github.com/OpenVPN/easy-rsa.git>https://github.com/OpenVPN/easy-rsa.git</a></strong></p></blockquote><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>Cloning into &#39;easy-rsa&#39;...
</span></span><span style=display:flex><span>remote: Enumerating objects: 2095, done.
</span></span><span style=display:flex><span>remote: Counting objects: 100% (13/13), done.
</span></span><span style=display:flex><span>remote: Compressing objects: 100% (11/11), done.
</span></span><span style=display:flex><span>remote: Total 2095 (delta 3), reused 4 (delta 0), pack-reused 2082
</span></span><span style=display:flex><span>Receiving objects: 100% (2095/2095), 11.72 MiB | 8.53 MiB/s, done.
</span></span><span style=display:flex><span>Resolving deltas: 100% (916/916), done.
</span></span><span style=display:flex><span>[root@aws-client ~]# cd easy-rsa/easyrsa3
</span></span></code></pre></div><ol start=2><li>初始化一个新的 PKI 环境。</li></ol><blockquote><p>[root@aws-client easyrsa3]# ./easyrsa init-pki</p></blockquote><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>init-pki complete; you may now create a CA or requests.
</span></span><span style=display:flex><span>Your newly created PKI dir is: /root/easy-rsa/easyrsa3/pki
</span></span></code></pre></div><ol start=3><li>要构建新的证书颁发机构 (CA)，运行此命令并按照提示进行操作。</li></ol><blockquote><p>[root@aws-client easyrsa3]# ./easyrsa build-ca nopass</p></blockquote><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>Using SSL: openssl OpenSSL 1.0.2k-fips  26 Jan 2017
</span></span><span style=display:flex><span>Generating RSA private key, 2048 bit long modulus
</span></span><span style=display:flex><span>...........................................................+++
</span></span><span style=display:flex><span>.............................................+++
</span></span><span style=display:flex><span>e is 65537 (0x10001)
</span></span><span style=display:flex><span>You are about to be asked to enter information that will be incorporated
</span></span><span style=display:flex><span>into your certificate request.
</span></span><span style=display:flex><span>What you are about to enter is what is called a Distinguished Name or a DN.
</span></span><span style=display:flex><span>There are quite a few fields but you can leave some blank
</span></span><span style=display:flex><span>For some fields there will be a default value,
</span></span><span style=display:flex><span>If you enter &#39;.&#39;, the field will be left blank.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&gt; Common Name (eg: your user, host, or server name) [Easy-RSA CA]:
</span></span><span style=display:flex><span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&gt; CA creation complete and you may now import and sign cert requests.
</span></span><span style=display:flex><span>Your new CA certificate file for publishing is at:
</span></span><span style=display:flex><span>/root/easy-rsa/easyrsa3/pki/ca.crt
</span></span></code></pre></div><ol start=4><li>生成服务器证书和密钥。</li></ol><blockquote><p>[root@aws-client easyrsa3]# ./easyrsa build-server-full server nopass</p></blockquote><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>Using SSL: openssl OpenSSL 1.0.2k-fips  26 Jan 2017
</span></span><span style=display:flex><span>Generating a 2048 bit RSA private key
</span></span><span style=display:flex><span>.........................................+++
</span></span><span style=display:flex><span>................................................................................................................................................................................................+++
</span></span><span style=display:flex><span>writing new private key to &#39;/root/easy-rsa/easyrsa3/pki/easy-rsa-20150.jkFOvJ/tmp.IxfNyt&#39;
</span></span><span style=display:flex><span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&gt; Using configuration from /root/easy-rsa/easyrsa3/pki/easy-rsa-20150.jkFOvJ/tmp.VOFQ28
</span></span><span style=display:flex><span>Check that the request matches the signature
</span></span><span style=display:flex><span>Signature ok
</span></span><span style=display:flex><span>The Subject&#39;s Distinguished Name is as follows
</span></span><span style=display:flex><span>commonName            :ASN.1 12:&#39;server&#39;
</span></span><span style=display:flex><span>Certificate is to be certified until Nov  7 05:14:23 2023 GMT (825 days)
</span></span><span style=display:flex><span>Write out database with 1 new entries
</span></span><span style=display:flex><span>Data Base Updated
</span></span></code></pre></div><ol start=5><li>生成客户端证书和密钥。</li></ol><blockquote><p>[root@aws-client easyrsa3]# ./easyrsa build-client-full client1.domain.tld nopass</p></blockquote><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>Using SSL: openssl OpenSSL 1.0.2k-fips  26 Jan 2017
</span></span><span style=display:flex><span>Generating a 2048 bit RSA private key
</span></span><span style=display:flex><span>.............................+++
</span></span><span style=display:flex><span>...+++
</span></span><span style=display:flex><span>writing new private key to &#39;/root/easy-rsa/easyrsa3/pki/easy-rsa-20238.mmgI0l/tmp.jCo3XW&#39;
</span></span><span style=display:flex><span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&gt; Using configuration from /root/easy-rsa/easyrsa3/pki/easy-rsa-20238.mmgI0l/tmp.yN78YF
</span></span><span style=display:flex><span>Check that the request matches the signature
</span></span><span style=display:flex><span>Signature ok
</span></span><span style=display:flex><span>The Subject&#39;s Distinguished Name is as follows
</span></span><span style=display:flex><span>commonName            :ASN.1 12:&#39;client1.domain.tld&#39;
</span></span><span style=display:flex><span>Certificate is to be certified until Nov  7 05:14:37 2023 GMT (825 days)
</span></span><span style=display:flex><span>Write out database with 1 new entries
</span></span><span style=display:flex><span>Data Base Updated
</span></span></code></pre></div><ol start=6><li>将服务器证书和密钥和客户端证书和密钥复制到自定义文件夹，然后导航到此自定义文件夹。</li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span> mkdir ~/custom_folder/
</span></span><span style=display:flex><span>cp pki/ca.crt ~/custom_folder/
</span></span><span style=display:flex><span>cp pki/issued/server.crt ~/custom_folder/
</span></span><span style=display:flex><span>cp pki/private/server.key ~/custom_folder/
</span></span><span style=display:flex><span>cp pki/issued/client1.domain.tld.crt ~/custom_folder
</span></span><span style=display:flex><span>cp pki/private/client1.domain.tld.key ~/custom_folder/
</span></span><span style=display:flex><span>cd ~/custom_folder/
</span></span></code></pre></div><ol start=7><li>将服务器证书和密钥以及客户端证书和密钥上传到 ACM。确保在打算在其中创建客户端 VPN 终端节点的同一区域中上传证书。</li></ol><blockquote><p>[root@aws-client custom_folder]# aws acm import-certificate &ndash;certificate fileb://server.crt &ndash;private-key fileb://server.key &ndash;certificate-chain fileb://ca.crt</p></blockquote><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>{
</span></span><span style=display:flex><span>&#34;CertificateArn&#34;: &#34;arn:aws:acm:ap-southeast-1:098246620002:certificate/8c1134dd-4b27-440c-91bd-466f41ce53ae&#34;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>[root@aws-client custom_folder]# aws acm import-certificate --certificate fileb://client1.domain.tld.crt --private-key fileb://client1.domain.tld.key --certificate-chain fileb://ca.crt
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>&#34;CertificateArn&#34;: &#34;arn:aws:acm:ap-southeast-1:098246620002:certificate/4d99213e-b684-4de9-889b-f2cd87819c48&#34;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ol start=8><li><p>在ACM控制台检查</p><p><img src="https://img-blog.csdnimg.cn/e428b8d2e2e441c296761512c689c926.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM5NDcyNA==,size_16,color_FFFFFF,t_70" alt="https://img-blog.csdnimg.cn/e428b8d2e2e441c296761512c689c926.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM5NDcyNA==,size_16,color_FFFFFF,t_70"></p></li></ol><h3 id=创建客户端-vpn-终端节点>创建客户端 VPN 终端节点</h3><ol><li><p>打开 Amazon VPC 控制台：<a href=https://console.aws.amazon.com/vpc/>https://console.aws.amazon.com/vpc/</a></p></li><li><p>选择 客户端 VPN 终端节点，然后选择创建客户端 VPN 终端节点</p><p><img src="https://img-blog.csdnimg.cn/e5bdb5b8fd2e4be38cd3f1f67701626e.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM5NDcyNA==,size_16,color_FFFFFF,t_70" alt="https://img-blog.csdnimg.cn/e5bdb5b8fd2e4be38cd3f1f67701626e.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM5NDcyNA==,size_16,color_FFFFFF,t_70"></p></li></ol><ul><li>对于 Client IPv4 CIDR (客户端 IPv4 CIDR)，客户端 CIDR 范围必须有介于 /12 和 /22 之间的块大小，且不得与 VPC CIDR 或路由表中的任何其他路由重叠。创建客户端 VPN 终端节点后，无法更改客户端 CIDR。</li><li>Server certificate ARN (服务器证书 ARN)，指定服务器要使用的 TLS 证书的 ARN（上一步骤）。</li><li>指定当客户端建立 VPN 连接时要用来对客户端进行身份验证的身份验证方法，选择使用相互身份验，然后对于客户端证书 ARN，指定在上一步骤 中生成的客户端证书的 ARN。</li></ul><h3 id=为客户端启用-vpn-连接>为客户端启用 VPN 连接</h3><p>要使客户端能够建立 VPN 会话，必须将一个目标网络与客户端 VPN 终端节点关联。目标网络是 VPC 中的一个子网。</p><p><img src=https://img-blog.csdnimg.cn/77f62f1b20a545e0a6092b78bc3d6927.png alt=https://img-blog.csdnimg.cn/77f62f1b20a545e0a6092b78bc3d6927.png></p><p><img src="https://img-blog.csdnimg.cn/28471b1135d648f687e5b5faa8eab734.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM5NDcyNA==,size_16,color_FFFFFF,t_70" alt="https://img-blog.csdnimg.cn/28471b1135d648f687e5b5faa8eab734.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM5NDcyNA==,size_16,color_FFFFFF,t_70"></p><p>将第一个子网与客户端 VPN 终端节点关联时，会发生以下情况：</p><ul><li>客户端 VPN 终端节点的状态更改为 available。客户端现在可以建立 VPN 连接，但无法访问 VPC 中的任何资源，直到添加授权规则。</li><li>VPC 的本地路由会自动添加到客户端 VPN 终端节点路由表中。</li><li>VPC 的默认安全组将自动应用于子网关联。</li></ul><p>本实验仅仅测试VPN的连接建立。</p><h3 id=授权客户端访问网络>授权客户端访问网络</h3><p><img src="https://img-blog.csdnimg.cn/b42dd8786d4f47c196b2bc40ede45120.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM5NDcyNA==,size_16,color_FFFFFF,t_70" alt="https://img-blog.csdnimg.cn/b42dd8786d4f47c196b2bc40ede45120.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM5NDcyNA==,size_16,color_FFFFFF,t_70"></p><p>我们选择了对VPC所有资源可以访问。
确保 VPC 中资源的安全组具有允许从安全组访问子网关联的规则。</p><h3 id=下载客户端-vpn-终端节点配置文件>下载客户端 VPN 终端节点配置文件</h3><ol><li><p>下载配置文件</p><p><img src="https://img-blog.csdnimg.cn/0bb04a6909a44701ac7a45baf4e43177.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM5NDcyNA==,size_16,color_FFFFFF,t_70" alt="https://img-blog.csdnimg.cn/0bb04a6909a44701ac7a45baf4e43177.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM5NDcyNA==,size_16,color_FFFFFF,t_70"></p></li><li><p>找到步骤 1 中生成的客户端证书和密钥。可以在克隆的 OpenVPN easy-rsa 存储库中的以下位置找到客户端证书和密钥：</p></li></ol><p>客户端证书 – easy-rsa/easyrsa3/pki/issued/client1.domain.tld.crt</p><p>客户端密钥 – easy-rsa/easyrsa3/pki/private/client1.domain.tld.key</p><ol start=3><li>打开客户端 VPN 终端节点配置文件，并在 <cert></cert> 标签之间添加客户端证书的内容，而在 <key></key> 标签之间添加私有密钥的内容。</li><li>在客户端 VPN 终端节点 DNS 名称前附加随机字符串。找到指定客户端 VPN 终端节点 DNS 名称的行，并在该行的前面添加随机字符串，以使格式成为 random_string.displayed_DNS_name。例如：
原始 DNS 名称：<a href=http://cvpn-endpoint-0102bc4c2eexample.prod.clientvpn.us-west-2.amazonaws.com/>cvpn-endpoint-0102bc4c2eEXAMPLE.prod.clientvpn.us-west-2.amazonaws.com</a>
修改的 DNS 名称：<a href=http://asdfa.cvpn-endpoint-0102bc4c2eexample.prod.clientvpn.us-west-2.amazonaws.com/>asdfa.cvpn-endpoint-0102bc4c2eEXAMPLE.prod.clientvpn.us-west-2.amazonaws.com</a></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>client
</span></span><span style=display:flex><span>dev tun
</span></span><span style=display:flex><span>proto udp
</span></span><span style=display:flex><span>remote asdffw.cvpn-endpoint-01a0f760dbbf46f8a.prod.clientvpn.ap-southeast-1.amazonaws.com 443
</span></span><span style=display:flex><span>remote-random-hostname
</span></span><span style=display:flex><span>resolv-retry infinite
</span></span><span style=display:flex><span>nobind
</span></span><span style=display:flex><span>remote-cert-tls server
</span></span><span style=display:flex><span>cipher AES-256-GCM
</span></span><span style=display:flex><span>verb 3
</span></span><span style=display:flex><span>&lt;ca&gt;
</span></span><span style=display:flex><span>-----BEGIN CERTIFICATE-----
</span></span><span style=display:flex><span>MIIDNTCCAh2gAwIBAgIJAK2NJev4Jr9sMA0GCSqGSIb3DQEBCwUAMBYxFDASBgNV
</span></span><span style=display:flex><span>BAMMC0Vhc3ktUlNBIENBMB4XDTIxMDgwNDA1MTQwN1oXDTMxMDgwMjA1MTQwN1ow
</span></span><span style=display:flex><span>FjEUMBIGA1UEAwwLRWFzeS1SU0EgQ0EwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAw
</span></span><span style=display:flex><span>ggEKAoIBAQCzY7PqwoBAqdAc/3Nl07w7DWbt/OzgmKPQ9aIY6az2yD9rq8zm3J9E
</span></span><span style=display:flex><span>aXwJyMUCMLzMDgKXOICIcKRsP/xJ16Rpo48ZHd0z5t0xHYqGIJkaEYlIm4inT3B3
</span></span><span style=display:flex><span>ofJvNGhKo6jRKklVJravH6B2I5U2VWcDrBv+HNZkbFV13BSn36uCkzMf2EUU/W2X
</span></span><span style=display:flex><span>1aRkhitZg9qpuLaf9NPhj54+QN8lnUz9O5qN0/Cwa/V5u4k3xlFya2P4ut/n0s/T
</span></span><span style=display:flex><span>QwD/0+hJFlMPtNNZQTUoDsKnExXwAxYML2/x4QOULGeFVqLwq5amCptcTz30gqKV
</span></span><span style=display:flex><span>EiVWc7b3rKaAG16gmiQ3bt6W+YlzYmlPAgMBAAGjgYUwgYIwHQYDVR0OBBYEFOJt
</span></span><span style=display:flex><span>5dVskMAXjCYpvQaqPYVylFTNMEYGA1UdIwQ/MD2AFOJt5dVskMAXjCYpvQaqPYVy
</span></span><span style=display:flex><span>lFTNoRqkGDAWMRQwEgYDVQQDDAtFYXN5LVJTQSBDQYIJAK2NJev4Jr9sMAwGA1Ud
</span></span><span style=display:flex><span>EwQFMAMBAf8wCwYDVR0PBAQDAgEGMA0GCSqGSIb3DQEBCwUAA4IBAQBk1j35k+ge
</span></span><span style=display:flex><span>YLYE37CpgUhj8+BPoHSkhyvA7oRmDaugjgm06eqSpoMbLLl1SeMxs8hYfImJ2dAZ
</span></span><span style=display:flex><span>T2oNBQEwUjBwut9Wb80EfjBG6TIy/zEvsdrWypGvZsx7Bbdu1P/P744IeatvVDJA
</span></span><span style=display:flex><span>fV63iB1lFBasmzxN2Y+FUmlAvvtf5+HWVn6apFD2mDo7FLT/POFk8J2nU9vL689m
</span></span><span style=display:flex><span>jZ1xCOUYWHIBIIycaKbTs/hkqUA0TeVIYvCah7Px0vgGiku9vfCoPPnZ4OE0dDYb
</span></span><span style=display:flex><span>AXWsoN79LbaS71SUVrKrdxnkoO/tsfwmDeqn/arIKMBBNI7LYfQur38g+lo+zvAP
</span></span><span style=display:flex><span>H8HDuGUIzUf4
</span></span><span style=display:flex><span>-----END CERTIFICATE-----
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/ca&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;cert&gt;
</span></span><span style=display:flex><span>Certificate:
</span></span><span style=display:flex><span>    Data:
</span></span><span style=display:flex><span>        Version: 3 (0x2)
</span></span><span style=display:flex><span>        Serial Number:
</span></span><span style=display:flex><span>            2c:d5:25:48:12:7d:4d:aa:ef:16:03:b0:9e:8b:44:e6
</span></span><span style=display:flex><span>    Signature Algorithm: sha256WithRSAEncryption
</span></span><span style=display:flex><span>        Issuer: CN=Easy-RSA CA
</span></span><span style=display:flex><span>        Validity
</span></span><span style=display:flex><span>            Not Before: Aug  4 05:14:37 2021 GMT
</span></span><span style=display:flex><span>            Not After : Nov  7 05:14:37 2023 GMT
</span></span><span style=display:flex><span>        Subject: CN=client1.domain.tld
</span></span><span style=display:flex><span>        Subject Public Key Info:
</span></span><span style=display:flex><span>            Public Key Algorithm: rsaEncryption
</span></span><span style=display:flex><span>                Public-Key: (2048 bit)
</span></span><span style=display:flex><span>                Modulus:
</span></span><span style=display:flex><span>                    00:cc:1a:61:3c:8a:f8:cc:55:bf:f6:82:58:a5:7c:
</span></span><span style=display:flex><span>                    cb:cb:ad:bf:43:16:dd:cb:27:d5:f1:6a:de:11:61:
</span></span><span style=display:flex><span>                    6c:10:5a:70:92:e6:ab:2f:f1:99:9b:77:91:4e:b6:
</span></span><span style=display:flex><span>                    ef:12:93:1b:a7:76:fc:0c:85:ff:c0:35:65:ea:a9:
</span></span><span style=display:flex><span>                    60:c0:73:45:4d:27:0c:51:09:62:27:f8:26:55:d3:
</span></span><span style=display:flex><span>                    3f:16:4e:d8:36:a7:91:50:89:fb:b8:7c:27:f5:98:
</span></span><span style=display:flex><span>                    ee:a7:e5:8a:46:fa:62:f6:4c:91:33:2b:f7:b8:c3:
</span></span><span style=display:flex><span>                    66:6b:1b:3e:e2:9a:25:df:38:ff:80:cf:a7:54:e8:
</span></span><span style=display:flex><span>                    20:14:3d:5b:c7:2c:10:03:5f:d9:57:6b:be:18:f3:
</span></span><span style=display:flex><span>                    58:dd:9b:0e:e7:45:41:a4:42:c8:27:6e:b6:4b:18:
</span></span><span style=display:flex><span>                    b7:b7:7b:73:0c:7a:8a:76:0b:4b:96:e2:6c:6b:02:
</span></span><span style=display:flex><span>                    c0:40:11:ce:84:92:5a:e3:22:b0:02:d3:cf:a3:b2:
</span></span><span style=display:flex><span>                    cd:74:11:dd:1d:da:0c:d1:1f:b1:46:1c:02:7e:8a:
</span></span><span style=display:flex><span>                    aa:6b:7e:d1:29:e7:7c:3e:17:29:25:b8:e7:a8:01:
</span></span><span style=display:flex><span>                    20:27:f5:6d:65:f0:a6:5c:06:8e:4d:74:f8:75:88:
</span></span><span style=display:flex><span>                    3e:d7:5e:0f:a9:a5:67:04:44:29:75:13:a0:f6:ab:
</span></span><span style=display:flex><span>                    7b:ce:f5:e8:3d:57:ed:42:92:b6:75:37:39:20:22:
</span></span><span style=display:flex><span>                    e4:85
</span></span><span style=display:flex><span>                Exponent: 65537 (0x10001)
</span></span><span style=display:flex><span>        X509v3 extensions:
</span></span><span style=display:flex><span>            X509v3 Basic Constraints:
</span></span><span style=display:flex><span>                CA:FALSE
</span></span><span style=display:flex><span>            X509v3 Subject Key Identifier:
</span></span><span style=display:flex><span>                F7:B8:6C:42:EF:69:18:33:B6:29:46:48:48:FA:B6:3A:3A:29:B3:4A
</span></span><span style=display:flex><span>            X509v3 Authority Key Identifier:
</span></span><span style=display:flex><span>                keyid:E2:6D:E5:D5:6C:90:C0:17:8C:26:29:BD:06:AA:3D:85:72:94:54:CD
</span></span><span style=display:flex><span>                DirName:/CN=Easy-RSA CA
</span></span><span style=display:flex><span>                serial:AD:8D:25:EB:F8:26:BF:6C
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            X509v3 Extended Key Usage:
</span></span><span style=display:flex><span>                TLS Web Client Authentication
</span></span><span style=display:flex><span>            X509v3 Key Usage:
</span></span><span style=display:flex><span>                Digital Signature
</span></span><span style=display:flex><span>    Signature Algorithm: sha256WithRSAEncryption
</span></span><span style=display:flex><span>         2d:6d:aa:2e:8e:15:02:17:d6:aa:37:07:f0:30:48:67:bd:23:
</span></span><span style=display:flex><span>         50:fa:7d:6d:ef:2d:8a:d1:62:58:60:91:b8:9c:5f:cc:72:c8:
</span></span><span style=display:flex><span>         6e:52:6c:05:4c:cb:ea:ec:94:a7:c2:2d:8b:68:a2:bd:36:50:
</span></span><span style=display:flex><span>         e7:97:76:8b:70:db:3d:61:30:20:24:f3:69:dd:bc:39:55:6f:
</span></span><span style=display:flex><span>         38:32:1d:a4:d9:a9:5d:52:a5:8d:a2:46:ee:13:7c:a7:a7:98:
</span></span><span style=display:flex><span>         0f:43:2a:31:4e:b6:58:3e:10:84:60:6e:ff:74:50:2f:dc:d1:
</span></span><span style=display:flex><span>         9d:5d:f3:cc:1d:6d:8e:55:3d:5c:dc:f1:46:13:59:8c:17:75:
</span></span><span style=display:flex><span>         c2:3e:74:d4:8a:99:7e:a2:6d:89:2a:dd:4d:84:4b:1d:98:5d:
</span></span><span style=display:flex><span>         9d:41:11:aa:4e:51:06:a4:0f:31:52:5e:a4:9e:57:2b:3a:f0:
</span></span><span style=display:flex><span>         90:59:7d:f1:eb:ec:00:e4:df:07:20:8c:4b:73:f2:49:8d:a3:
</span></span><span style=display:flex><span>         24:00:7e:66:21:12:6d:23:b4:3a:2b:3b:81:4a:71:7b:28:2c:
</span></span><span style=display:flex><span>         f6:db:8f:bc:b7:79:b9:21:20:f7:42:ff:76:80:7b:cc:d7:d8:
</span></span><span style=display:flex><span>         99:0a:3e:23:2e:25:1a:42:86:3b:1e:a8:7f:81:37:0c:59:d5:
</span></span><span style=display:flex><span>         4e:ee:58:00:8e:50:c1:ce:8a:8c:ff:3d:67:0e:06:c5:76:54:
</span></span><span style=display:flex><span>         8b:cb:67:84
</span></span><span style=display:flex><span>-----BEGIN CERTIFICATE-----
</span></span><span style=display:flex><span>MIIDVTCCAj2gAwIBAgIQLNUlSBJ9TarvFgOwnotE5jANBgkqhkiG9w0BAQsFADAW
</span></span><span style=display:flex><span>MRQwEgYDVQQDDAtFYXN5LVJTQSBDQTAeFw0yMTA4MDQwNTE0MzdaFw0yMzExMDcw
</span></span><span style=display:flex><span>NTE0MzdaMB0xGzAZBgNVBAMMEmNsaWVudDEuZG9tYWluLnRsZDCCASIwDQYJKoZI
</span></span><span style=display:flex><span>hvcNAQEBBQADggEPADCCAQoCggEBAMwaYTyK+MxVv/aCWKV8y8utv0MW3csn1fFq
</span></span><span style=display:flex><span>3hFhbBBacJLmqy/xmZt3kU627xKTG6d2/AyF/8A1ZeqpYMBzRU0nDFEJYif4JlXT
</span></span><span style=display:flex><span>PxZO2DankVCJ+7h8J/WY7qflikb6YvZMkTMr97jDZmsbPuKaJd84/4DPp1ToIBQ9
</span></span><span style=display:flex><span>W8csEANf2VdrvhjzWN2bDudFQaRCyCdutksYt7d7cwx6inYLS5bibGsCwEARzoSS
</span></span><span style=display:flex><span>WuMisALTz6OyzXQR3R3aDNEfsUYcAn6Kqmt+0SnnfD4XKSW456gBICf1bWXwplwG
</span></span><span style=display:flex><span>jk10+HWIPtdeD6mlZwREKXUToPare8716D1X7UKStnU3OSAi5IUCAwEAAaOBlzCB
</span></span><span style=display:flex><span>lDAJBgNVHRMEAjAAMB0GA1UdDgQWBBT3uGxC72kYM7YpRkhI+rY6OimzSjBGBgNV
</span></span><span style=display:flex><span>HSMEPzA9gBTibeXVbJDAF4wmKb0Gqj2FcpRUzaEapBgwFjEUMBIGA1UEAwwLRWFz
</span></span><span style=display:flex><span>eS1SU0EgQ0GCCQCtjSXr+Ca/bDATBgNVHSUEDDAKBggrBgEFBQcDAjALBgNVHQ8E
</span></span><span style=display:flex><span>BAMCB4AwDQYJKoZIhvcNAQELBQADggEBAC1tqi6OFQIX1qo3B/AwSGe9I1D6fW3v
</span></span><span style=display:flex><span>LYrRYlhgkbicX8xyyG5SbAVMy+rslKfCLYtoor02UOeXdotw2z1hMCAk82ndvDlV
</span></span><span style=display:flex><span>bzgyHaTZqV1SpY2iRu4TfKenmA9DKjFOtlg+EIRgbv90UC/c0Z1d88wdbY5VPVzc
</span></span><span style=display:flex><span>8UYTWYwXdcI+dNSKmX6ibYkq3U2ESx2YXZ1BEapOUQakDzFSXqSeVys68JBZffHr
</span></span><span style=display:flex><span>7ADk3wcgjEtz8kmNoyQAfmYhEm0jtDorO4FKcXsoLPbbj7y3ebkhIPdC/3aAe8zX
</span></span><span style=display:flex><span>2JkKPiMuJRpChjseqH+BNwxZ1U7uWACOUMHOioz/PWcOBsV2VIvLZ4Q=
</span></span><span style=display:flex><span>-----END CERTIFICATE-----
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/cert&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;key&gt;
</span></span><span style=display:flex><span>-----BEGIN PRIVATE KEY-----
</span></span><span style=display:flex><span>MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDMGmE8ivjMVb/2
</span></span><span style=display:flex><span>glilfMvLrb9DFt3LJ9Xxat4RYWwQWnCS5qsv8Zmbd5FOtu8SkxundvwMhf/ANWXq
</span></span><span style=display:flex><span>qWDAc0VNJwxRCWIn+CZV0z8WTtg2p5FQifu4fCf1mO6n5YpG+mL2TJEzK/e4w2Zr
</span></span><span style=display:flex><span>Gz7imiXfOP+Az6dU6CAUPVvHLBADX9lXa74Y81jdmw7nRUGkQsgnbrZLGLe3e3MM
</span></span><span style=display:flex><span>eop2C0uW4mxrAsBAEc6EklrjIrAC08+jss10Ed0d2gzRH7FGHAJ+iqprftEp53w+
</span></span><span style=display:flex><span>FykluOeoASAn9W1l8KZcBo5NdPh1iD7XXg+ppWcERCl1E6D2q3vO9eg9V+1CkrZ1
</span></span><span style=display:flex><span>NzkgIuSFAgMBAAECggEAGIjbQ3HZMobkSnekvE/iF5vNL/1hr/gb6adVBnXVjamx
</span></span><span style=display:flex><span>epcr4NmEA4I9/15SIsN4QYs2BTNeaPaCR9EQhlHU9M9K1brxB6j2wr5gCQh1SSyf
</span></span><span style=display:flex><span>dTUBA045Z3Z4ycn380xJ9R2DHsmcP6ONfjaKOqcZAlpRrGRJ0xUMNiKiE7EiQ6Vc
</span></span><span style=display:flex><span>4t+IOW3JGVba1mCtlkEfOUab3P46gLDDUdPTvT3t9m9wFAlxHtOYoe+yG6W+mYI5
</span></span><span style=display:flex><span>fgwRLg9juStdMMrHCND00UgN778yTkHGWx1kSd7T1DhpKrloSCjPM1Zo1/4ZCYjb
</span></span><span style=display:flex><span>2/Mfrpu2aNl1Ena11rZ7QfrvhnYNQE9y5LWZqW6WiQKBgQDz4H/6fq5zOi501Law
</span></span><span style=display:flex><span>WZ5ztKtZvhg/gyRlGtoZRJLRH8AZ7BKIQ/NjBsMWpNzHHL/9U4nnceTgngm/1sNa
</span></span><span style=display:flex><span>85iNQLLlz1HthOxLznjo9yGQ8Sgx3ZcXWPN5ZcWQF05wi95+iqXo3IurFjP6rpjD
</span></span><span style=display:flex><span>6uWjLs4Ox05DYRyXn++uUouj8wKBgQDWP7ra5zfhs82xXT9YMvZM9h2Y4B9bUYuA
</span></span><span style=display:flex><span>gQZcwFT0PzI6d1mYv3V157wHG6M6nekW//mcLKlSRPYdI7IyM1FtPWywJPHgJxc+
</span></span><span style=display:flex><span>1cran/biq8qF0Bn/boFSyDAW5SQXwAHVdeRK4UR3Fgl9vfkhoV855v1cgLXE+GFq
</span></span><span style=display:flex><span>Bc/RBmKLpwKBgQCY8v2Qjo6+OYkVQKrq4unbSz4D5JK0knzq4/JQ0o75lN4X49Sj
</span></span><span style=display:flex><span>nWoxevYzZ2YHgmJucEwW2Xlf3f3jUL/odMoCHMeWFXYebrT7vhxaj1N/4Z8B1yWB
</span></span><span style=display:flex><span>QQpB4rAK9HL/Ztk9p5rx9g+qVxx2ZbXteY5Xz2zwG9NbsrYJ6gaZ368wPQKBgQCi
</span></span><span style=display:flex><span>WfzAcMIZ2GSgaKbdsRCPVVksRXm9e1eY8yzdECnQRCtNvq84Xq0lwYrsX/cbLho5
</span></span><span style=display:flex><span>gZOm0vkkDHnrrucTv2uOuiMof3aCg1zMErn7XYh6T+/R4tYwh46cKnK2hsEI9kjt
</span></span><span style=display:flex><span>dr6eN4HoM9zRWin1YBGHEREhDa+wKP+4ldra7Fm0tQKBgFgU5iEgxGvjnD+M4P6I
</span></span><span style=display:flex><span>lg/HceJUzqDqvKXibERc0Jyru/E/ZJ13HgyLnPFQzTKm5ZRGmKu6RbvoLOFNv9SW
</span></span><span style=display:flex><span>m8ABsPrRnpfppki0ZsBTboIMFjeg/iQOGFF5MD800uP1kmueYxxeT73wrR5N+ZCw
</span></span><span style=display:flex><span>MiRH51+8RuYLVzuA7XFa+Vso
</span></span><span style=display:flex><span>-----END PRIVATE KEY-----
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/key&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>reneg-sec 0
</span></span></code></pre></div><ol start=5><li>保存并关闭客户端 VPN 终端节点配置文件。</li></ol><h3 id=连接到客户端-vpn-终端节点>连接到客户端 VPN 终端节点</h3><ol><li>下载客户端软件并安装
<a href=https://aws.amazon.com/cn/vpn/client-vpn-download/>https://aws.amazon.com/cn/vpn/client-vpn-download/</a></li><li>配置</li></ol><p><img src="https://img-blog.csdnimg.cn/aa160f591fdc4a6482547883a3f23e13.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM5NDcyNA==,size_16,color_FFFFFF,t_70" alt="https://img-blog.csdnimg.cn/aa160f591fdc4a6482547883a3f23e13.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM5NDcyNA==,size_16,color_FFFFFF,t_70"></p><ol start=3><li>连接</li></ol><p><img src="https://img-blog.csdnimg.cn/7cd54c8ee5b44305ae53b97c96ca730e.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM5NDcyNA==,size_16,color_FFFFFF,t_70" alt="https://img-blog.csdnimg.cn/7cd54c8ee5b44305ae53b97c96ca730e.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM5NDcyNA==,size_16,color_FFFFFF,t_70"></p><p><img src="https://img-blog.csdnimg.cn/8f71a50e0305439fb5d5792d63b32a5d.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM5NDcyNA==,size_16,color_FFFFFF,t_70" alt="https://img-blog.csdnimg.cn/8f71a50e0305439fb5d5792d63b32a5d.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM5NDcyNA==,size_16,color_FFFFFF,t_70"></p><p>以上</p></div><footer class=post-footer><div id=wcomments></div></footer></article></section></div></div><div class=sidebar-toggle><div class=sidebar-toggle-line-wrap><span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
<span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
<span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id=sidebar class=sidebar><div class=sidebar-inner><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target=post-toc-wrap>文章目录</li><li class=sidebar-nav-overview data-target=site-overview>站点概览</li></ul><section class="site-overview sidebar-panel"><div class="site-author motion-element" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image src=/img/avatar.png alt=Etaon><p class=site-author-name itemprop=name>Etaon</p><p class="site-description motion-element" itemprop=description>Kepp Going!</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href=/post/><span class=site-state-item-count>64</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>14</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>35</span>
<span class=site-state-item-name>标签</span></a></div></nav><div class="links-of-author motion-element"><span class=links-of-author-item><a href=https://github.com/etaon target=_blank title=GitHub><i class="fa fa-fw fa-github"></i>
GitHub</a></span>
<span class=links-of-author-item><a href=https://blog.csdn.net/weixin_43394724 target=_blank title=CSDN><i class="fa fa-fw fa-CSDN"></i>
CSDN</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class=links-of-blogroll-title><i class="fa fa-fw fa-globe"></i>
友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://kubernetes.io/ title=Kubernetes target=_blank>Kubernetes</a></li><li class=links-of-blogroll-item><a href=https://cisco.com/ title=Cisco target=_blank>Cisco</a></li><li class=links-of-blogroll-item><a href=https://www.w3school.com.cn/ title=W3School target=_blank>W3School</a></li><li class=links-of-blogroll-item><a href=https://www.liaoxuefeng.com/ title=廖雪峰 target=_blank>廖雪峰</a></li></ul></div><div class="tagcloud-of-blogroll motion-element tagcloud-of-blogroll-inline"><div class=tagcloud-of-blogroll-title><i class="fa fa-fw fa-tags"></i>
标签云</div><ul class=tagcloud-of-blogroll-list><li class=tagcloud-of-blogroll-item><a href=/tags/mysql>Mysql</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/aws>Aws</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/dql>Dql</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/hadoop>Hadoop</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/redis>Redis</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/cicd>Cicd</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/git>Git</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/istio>Istio</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/mongodb>Mongodb</a></li><li class=tagcloud-of-blogroll-item><a href=/tags/azure>Azure</a></li></ul></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class=post-toc><div class=post-toc-content><nav id=TableOfContents><ul><li><a href=#aws-客户端-vpn概述>AWS 客户端 VPN概述</a></li><li><a href=#示例拓扑>示例拓扑</a></li><li><a href=#客户端-vpn-的组件>客户端 VPN 的组件</a></li><li><a href=#实验步骤>实验步骤</a><ul><li><a href=#配置双向身份验证>配置双向身份验证</a></li><li><a href=#创建客户端-vpn-终端节点>创建客户端 VPN 终端节点</a></li><li><a href=#为客户端启用-vpn-连接>为客户端启用 VPN 连接</a></li><li><a href=#授权客户端访问网络>授权客户端访问网络</a></li><li><a href=#下载客户端-vpn-终端节点配置文件>下载客户端 VPN 终端节点配置文件</a></li><li><a href=#连接到客户端-vpn-终端节点>连接到客户端 VPN 终端节点</a></li></ul></li></ul></nav></div></div></section></div></aside></div></main><footer id=footer class=footer><div class=footer-inner><div class=copyright><span class=copyright-year>&copy; 2010 - 2022</span>
<span class=with-love><i class="fa fa-heart"></i></span>
<span class=copyright-author>路无止境！</span></div><div class=powered-info><span class=powered-by>Powered by - <a class=powered-link href=//gohugo.io target=_blank title=hugo>Hugo v0.101.0</a></span>
<span class=separator-line>/</span>
<span class=theme-info>Theme by - <a class=powered-link href=//github.com/elkan1788/hugo-theme-next target=_blank>NexT</a></span></div><div class=vistor-info><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script>
<span class=site-uv><i class="fa fa-user"></i>
<span class=busuanzi-value id=busuanzi_value_site_uv></span></span>
<span class=separator-line>/</span>
<span class=site-pv><i class="fa fa-eye"></i>
<span class=busuanzi-value id=busuanzi_value_site_pv></span></span></div><div class=license-info><span class=storage-info>Storage by
<a href=https://www.azure.com/ style=font-weight:700 target=_blank>Azure static web apps</a></span>
<span class=separator-line>/</span>
<span class=license-num><a href target=_blank></a></span></div></div></footer><div class=back-to-top><i class="fa fa-arrow-up"></i>
<span id=scrollpercent><span>0</span>%</span></div></div><script type=text/javascript src=//cdn.bootcdn.net/ajax/libs/jquery/2.1.4/jquery.min.js></script>
<script type=text/javascript src=/js/search.js></script>
<script type=text/javascript src=/js/affix.js></script>
<script type=text/javascript src=/js/scrollspy.js></script>
<script type=text/javascript>function detectIE(){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),n=e.indexOf("Trident/"),s=e.indexOf("Edge/");return t>0||n>0||s>0?-1:1}function getCntViewHeight(){var t=$("#content").height(),e=$(window).height(),n=t>e?t-e:$(document).height()-e;return n}function getScrollbarWidth(){var e=$("<div />").addClass("scrollbar-measure").prependTo("body"),t=e[0],n=t.offsetWidth-t.clientWidth;return e.remove(),n}function registerBackTop(){var t=50,e=$(".back-to-top");$(window).on("scroll",function(){e.toggleClass("back-to-top-on",window.pageYOffset>t);var s=$(window).scrollTop(),o=getCntViewHeight(),i=s/o,n=Math.round(i*100),a=n>100?100:n;$("#scrollpercent>span").html(a)}),e.on("click",function(){$("html,body").animate({scrollTop:0,screenLeft:0},800)})}function initScrollSpy(){var e=".post-toc",s=$(e),t=".active-current";s.on("activate.bs.scrollspy",function(){var t=$(e+" .active").last();n(),t.addClass("active-current")}).on("clear.bs.scrollspy",n),$("body").scrollspy({target:e});function n(){$(e+" "+t).removeClass(t.substring(1))}}function initAffix(){var e=$(".header-inner").height(),t=parseInt($(".main").css("padding-bottom"),10),n=e+10;$(".sidebar-inner").affix({offset:{top:n,bottom:t}}),$(document).on("affixed.bs.affix",function(){updateTOCHeight(document.body.clientHeight-100)})}function initTOCDimension(){$(window).on("resize",function(){e&&clearTimeout(e),e=setTimeout(function(){var e=document.body.clientHeight-100;updateTOCHeight(e)},0)}),updateTOCHeight(document.body.clientHeight-100);var e,t=getScrollbarWidth();$(".post-toc").css("width","calc(100% + "+t+"px)")}function updateTOCHeight(e){e=e||"auto",$(".post-toc").css("max-height",e)}$(function(){var e,t,n,s,o=$(".header-inner").height()+10;$("#sidebar").css({"margin-top":o}).show(),t=parseInt($("#sidebar").css("margin-top")),n=parseInt($(".sidebar-inner").css("height")),e=t+n,s=$(".content-wrap").height(),s<e&&$(".content-wrap").css("min-height",e),$(".site-nav-toggle").on("click",function(){var e=$(".site-nav"),o=$(".toggle"),t="site-nav-on",i="toggle-close",n=e.hasClass(t),a=n?"slideUp":"slideDown",s=n?"removeClass":"addClass";e.stop()[a]("normal",function(){e[s](t),o[s](i)})}),registerBackTop(),initScrollSpy(),initAffix(),initTOCDimension(),$(".sidebar-nav-toc").click(function(){$(this).addClass("sidebar-nav-active"),$(this).next().removeClass("sidebar-nav-active"),$("."+$(this).next().attr("data-target")).toggle(500),$("."+$(this).attr("data-target")).toggle(500)}),$(".sidebar-nav-overview").click(function(){$(this).addClass("sidebar-nav-active"),$(this).prev().removeClass("sidebar-nav-active"),$("."+$(this).prev().attr("data-target")).toggle(500),$("."+$(this).attr("data-target")).toggle(500)})})</script><script src=//cdn.bootcdn.net/ajax/libs/imageviewer/0.1.0/viewer.min.js></script>
<script type=text/javascript>$(function(){$(".post-body").viewer()})</script><script type=text/javascript>$(function(){detectIE()>0?$.getScript(document.location.protocol+"//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js",function(){new Waline({el:"#wcomments",visitor:!0,avatar:"wavatar",avatarCDN:"https://sdn.geekzu.org/avatar/",avatarForce:!1,wordLimit:"200",placeholder:" 欢迎留下您的宝贵建议，请填写您的昵称和邮箱便于后续交流. ^_^ ",requiredFields:["nick","mail"],serverURL:"Your WalineSerURL",lang:"zh-cn"})}):$("#wcomments").html("抱歉，Waline插件不支持IE或Edge，建议使用Chrome浏览器。")})</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_SVG"></script>
<script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=Your%20AddthisId"></script>
<script>(function(){var t,e=document.createElement("script"),n=window.location.protocol.split(":")[0];n==="https"?e.src="https://zz.bdstatic.com/linksubmit/push.js":e.src="http://push.zhanzhang.baidu.com/push.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)})()</script></body></html>